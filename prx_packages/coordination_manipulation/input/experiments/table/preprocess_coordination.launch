<!-- Auto generated launch file for Baxter: 2 1 1 -->
<launch>
  <rosparam command="load" file="$(find prx_input)/templates/spaces/space_types.yaml"/>

  <!-- = = = = = = = -->
  <!--    Planning   -->
  <!-- = = = = = = = -->

  <rosparam command="load" ns="planning" file="$(find prx_input)/templates/planning_applications/single_query_application.yaml" />
  <rosparam command="load" ns="planning/world_model" file="$(find manipulation)/input/manipulation_simulator.yaml"/>  
  <rosparam command="load" ns="planning/world_model/simulator/subsystems/manipulator" file="$(find manipulation)/input/baxter/baxter_bighands.yaml"/>
  <rosparam command="load" ns="planning/cup_object" file="$(find manipulation)/input/objects/cup.yaml"/>
  <rosparam command="load" ns="planning/crayola_object" file="$(find manipulation)/input/objects/crayola.yaml"/>
  <rosparam command="load" ns="planning/task_planner/" file="$(find coordination_manipulation)/input/templates/preprocess_coord_tp.yaml"/>

  <rosparam ns="planning">
    simulate: false
    visualize: false
    persistent: false
    world_model:
      type: manipulation_world_model
      num_ik_seeds: 10
      IK_databases:
        baxter_database:
          distance_metric:
            type: linear_distance_metric
          manipulator: manipulator
          samples: 10000
          deserialize_file: baxter[20000].database
  </rosparam>


  <rosparam ns="planning/world_model/planning_contexts">
    manipulator_pc:
      default:
        type: "hide_mapping"
    left_full_arm:
      default:
        type: "obstacle_mapping"
      manipulation_context_info:
        full_arm_context_name: "left_full_arm"
        arm_context_name: "left_arm"
        end_effector_context_name: "left_end_effector"
        start_link: "base"
        end_link: "end_effector_left"
        ik_database: baxter_database
        left_arm_ik: true
    left_arm:
      default:
       type: "obstacle_mapping"
    left_arm_planning:
      default:
        type: "hide_mapping"
    left_end_effector:
      default:
       type: "hide_mapping"
    right_full_arm:
      default:
        type: "obstacle_mapping"
      manipulation_context_info:
        full_arm_context_name: "right_full_arm"
        arm_context_name: "right_arm"
        end_effector_context_name: "right_end_effector"
        start_link: "base"
        end_link: "end_effector_right"
        ik_database: baxter_database
        left_arm_ik: false
    right_arm:
      default:
       type: "obstacle_mapping"
    right_arm_planning:
      default:
        type: "hide_mapping"
    right_end_effector:
      default:
       type: "hide_mapping"
  </rosparam>

  <rosparam ns="planning/task_planner">
    experiment: "TABLE"
    full_manipulator_context_name: "manipulator_pc"
    left_context_name: "left_full_arm"
    right_context_name: "right_full_arm"
    object_types: ["cup", "crayola"]
    num_trajectories_per_object_type: [200,200]
    trajectories_directory: "/prx_packages/coordination_manipulation/input/experiments/table/trajectories/"
    approximate_collisions: true
    planners:
      coordination_planner:
        type: preprocess_coord_mp
        preprocess_graph: true
  </rosparam>

  <rosparam ns="planning/problems">
    benchmark_problem:
      specification:
        type: "motion_planning_specification"
        sampler:
          type: uniform_sampler
        validity_checker:
          type: world_model_validity_checker
        distance_metric:
          type: linear_distance_metric
          distance_function: manhattan_distance
        local_planner:
          type: bvp_local_planner
        stopping_criteria:
          elements:
            criterion1:
              type: iteration_criterion
              condition: 100
      query:
        type: "preprocess_mp_query"
        query_type: "add_query_points_no_collisions"
        query_collision_type: "no_collisions"
        goal:
          type: "goal_state"
          distance_metric:
            type: linear_distance_metric
  </rosparam>

  <rosparam ns="planning/world_model/simulator/subsystems/manipulator">
    initial_state: [1.5681561256801836989893673,-0.6933267886173464233934283,-0.8849957765343199334040492,1.9000335039215263677192524,-2.2107340224187499444497007,-0.8368545446250841290947164,0.9573491235931878007292539,-1.6812774859126198290226739,-0.5125644883535177553923745,1.0773961507954412653020881,1.8738453488311539452126908,1.9879612960600967497271085,-0.9987250827246928475133814,-0.8436528393489071131483570, 1,1]
    planning_contexts:
      manipulator_pc:
        type: "full_mapping"
      left_full_arm:
        type: "baxter_left_full_arm_state_mapping"
      left_arm:
        type: "baxter_left_arm_state_mapping"
      left_end_effector:
        type: "baxter_left_gripper_state_mapping"
      left_arm_planning:
        type: "baxter_left_arm_state_mapping"
      right_full_arm:
        type: "baxter_right_full_arm_state_mapping"
      right_arm:
        type: "baxter_right_arm_state_mapping"
      right_end_effector:
        type: "baxter_right_gripper_state_mapping"
      right_arm_planning:
        type: "baxter_right_arm_state_mapping"
  </rosparam>
  
  <rosparam command="load" ns="planning/world_model/simulator/subsystems/box2">
    template: "cup_object"
    initial_state: [-4,-4,-4,0,0,-0.532765,0.846263]
  </rosparam>

</launch>

